# Trader App - 완전한 UI 테스트 계획 및 사용자 시나리오

## 1. 프로젝트 개요

Trader App은 전설적인 트레이더들(제시 리버모어, 래리 윌리엄스, 스탠 와인스타인)의 투자 전략을 AI로 분석하여 매수/매도 추천을 제공하는 프리미엄 구독 서비스입니다.

## 2. 주요 사용자 페르소나

### 2.1 김투자 (35세, 직장인 투자자)
- **목표**: 안정적이고 체계적인 투자 수익
- **투자 경험**: 3년차 주식 투자자
- **특징**: 일과 중 시간이 제한적, 전문가의 조언 필요
- **우려사항**: 감정적 투자, 손실 리스크

### 2.2 박트레이더 (42세, 전업 투자자)
- **목표**: 전문 트레이더들의 전략 학습 및 활용
- **투자 경험**: 10년 이상
- **특징**: 다양한 전략 비교 분석, 백테스트 중시
- **우려사항**: 전략의 실효성, 실시간 신호의 정확성

### 2.3 이초보 (28세, 투자 초보자)
- **목표**: 투자 학습과 안전한 시작
- **투자 경험**: 1년 미만
- **특징**: 모바일 우선, 간단한 UI 선호
- **우려사항**: 복잡한 투자 용어, 큰 손실 두려움

## 3. 전체 사용자 여정 (User Journey)

### 3.1 신규 사용자 온보딩 플로우

```
스플래시 화면 → 언어 선택 → 온보딩(4단계) → 약관 동의 → 로그인/회원가입 → 
전략가 선택 → 구독 플랜 선택 → 메인 화면
```

### 3.2 기존 사용자 일반 플로우

```
앱 실행 → 자동 로그인 → 메인 화면 → 추천 확인 → 상세 분석 → 
포지션 확인 → 매매 실행 → 포트폴리오 확인
```

## 4. 화면별 상세 테스트 시나리오

### 4.1 스플래시 화면 (SplashScreen)

#### 테스트 케이스
| TC_ID | 시나리오 | 테스트 단계 | 예상 결과 | 우선순위 |
|-------|---------|------------|-----------|---------|
| TC_001 | 첫 실행 시 언어 선택 | 1. 앱 최초 실행<br>2. 3초 대기 | 언어 선택 화면 이동 | P0 |
| TC_002 | 기존 사용자 자동 로그인 | 1. 로그인 상태로 앱 실행<br>2. 3초 대기 | 메인 화면 이동 | P0 |
| TC_003 | 로그인 안된 상태 | 1. 로그아웃 상태로 앱 실행<br>2. 3초 대기 | 로그인 화면 이동 | P0 |

### 4.2 언어 선택 화면 (LanguageSelectionScreen)

#### 테스트 케이스
| TC_ID | 시나리오 | 테스트 단계 | 예상 결과 | 우선순위 |
|-------|---------|------------|-----------|---------|
| TC_004 | 한국어 선택 | 1. 한국어 옵션 탭<br>2. 다음 버튼 클릭 | 온보딩 화면(한국어) | P0 |
| TC_005 | 영어 선택 | 1. English 옵션 탭<br>2. Next 버튼 클릭 | 온보딩 화면(영어) | P0 |
| TC_006 | 언어 미선택 | 1. 언어 선택 없이 다음 클릭 | 선택 요청 메시지 | P1 |

### 4.3 온보딩 화면 (OnboardingScreen)

#### 테스트 케이스
| TC_ID | 시나리오 | 테스트 단계 | 예상 결과 | 우선순위 |
|-------|---------|------------|-----------|---------|
| TC_007 | 온보딩 완료 | 1. 각 페이지 스와이프(4회)<br>2. 시작하기 클릭 | 약관 동의 화면 | P0 |
| TC_008 | 온보딩 스킵 | 1. 스킵 버튼 클릭 | 약관 동의 화면 | P1 |
| TC_009 | 페이지 인디케이터 | 1. 각 페이지 이동 | 인디케이터 업데이트 | P2 |

### 4.4 로그인/회원가입 화면 (LoginScreen)

#### 테스트 케이스
| TC_ID | 시나리오 | 테스트 단계 | 예상 결과 | 우선순위 |
|-------|---------|------------|-----------|---------|
| TC_010 | 정상 로그인 | 1. 이메일/비밀번호 입력<br>2. 로그인 클릭 | 메인 화면 이동 | P0 |
| TC_011 | 잘못된 자격증명 | 1. 틀린 비밀번호 입력<br>2. 로그인 클릭 | 에러 메시지 표시 | P0 |
| TC_012 | 이메일 형식 검증 | 1. 잘못된 이메일 형식<br>2. 로그인 클릭 | 형식 에러 메시지 | P1 |
| TC_013 | 회원가입 | 1. 회원가입 링크 클릭<br>2. 정보 입력<br>3. 가입 완료 | 전략가 선택 화면 | P0 |
| TC_014 | 비밀번호 찾기 | 1. 비밀번호 찾기 클릭<br>2. 이메일 입력 | 재설정 이메일 발송 | P1 |

### 4.5 전략가 선택 화면 (TraderSelectionScreen)

#### 테스트 케이스
| TC_ID | 시나리오 | 테스트 단계 | 예상 결과 | 우선순위 |
|-------|---------|------------|-----------|---------|
| TC_015 | 단일 전략 선택 | 1. 제시 리버모어 선택<br>2. 다음 클릭 | 구독 화면 이동 | P0 |
| TC_016 | 다중 전략 선택 | 1. 2개 이상 전략 선택<br>2. 다음 클릭 | 구독 화면(다중 표시) | P0 |
| TC_017 | 전략 상세 보기 | 1. 전략 정보 아이콘 클릭 | 전략 설명 모달 | P1 |
| TC_018 | 선택 없이 진행 | 1. 선택 없이 다음 클릭 | 선택 요청 메시지 | P1 |

### 4.6 구독 화면 (SubscriptionScreen)

#### 테스트 케이스
| TC_ID | 시나리오 | 테스트 단계 | 예상 결과 | 우선순위 |
|-------|---------|------------|-----------|---------|
| TC_019 | Basic 플랜 구독 | 1. Basic 선택<br>2. 결제 진행 | 구독 활성화, 메인 화면 | P0 |
| TC_020 | Premium 플랜 구독 | 1. Premium 선택<br>2. 결제 진행 | 프리미엄 기능 활성화 | P0 |
| TC_021 | 무료 체험 시작 | 1. 무료 체험 버튼 클릭 | 7일 체험 시작 | P0 |
| TC_022 | 구독 취소 | 1. 구독 관리<br>2. 취소 선택 | 취소 확인 메시지 | P1 |

### 4.7 메인 화면 (MainScreen) - 홈 탭

#### 테스트 케이스
| TC_ID | 시나리오 | 테스트 단계 | 예상 결과 | 우선순위 |
|-------|---------|------------|-----------|---------|
| TC_023 | 추천 종목 목록 확인 | 1. 홈 탭 진입 | 최신 추천 종목 표시 | P0 |
| TC_024 | 추천 종목 상세 | 1. 추천 카드 클릭 | 상세 분석 화면 | P0 |
| TC_025 | 전략 필터링 | 1. 전략 탭 클릭<br>2. 특정 전략 선택 | 해당 전략 추천만 표시 | P0 |
| TC_026 | 실시간 업데이트 | 1. 화면 유지<br>2. 새 추천 발생 | 실시간 업데이트 | P1 |
| TC_027 | Pull to Refresh | 1. 아래로 당기기 | 데이터 새로고침 | P1 |

### 4.8 전략 상세 화면 (StrategyDetailScreen)

#### 테스트 케이스
| TC_ID | 시나리오 | 테스트 단계 | 예상 결과 | 우선순위 |
|-------|---------|------------|-----------|---------|
| TC_028 | 매수 신호 확인 | 1. 매수 추천 상세 진입 | 진입가, 손절가, 목표가 표시 | P0 |
| TC_029 | 차트 분석 | 1. 차트 탭 클릭<br>2. 기간 변경 | 기술적 분석 차트 | P0 |
| TC_030 | 포지션 계산기 | 1. 투자금액 입력<br>2. 계산 클릭 | 적정 주식 수 표시 | P0 |
| TC_031 | 알림 설정 | 1. 알림 토글 ON | 가격 도달시 알림 | P1 |
| TC_032 | 매매 실행 | 1. 매수/매도 버튼 클릭 | 증권사 앱 연동 | P2 |

### 4.9 포지션 화면 (PositionScreen)

#### 테스트 케이스
| TC_ID | 시나리오 | 테스트 단계 | 예상 결과 | 우선순위 |
|-------|---------|------------|-----------|---------|
| TC_033 | 보유 포지션 확인 | 1. 포지션 탭 진입 | 현재 보유 종목 목록 | P0 |
| TC_034 | 수익률 확인 | 1. 개별 포지션 확인 | 실시간 수익률 표시 | P0 |
| TC_035 | 포지션 종료 | 1. 종료 버튼 클릭<br>2. 확인 | 포지션 종료 처리 | P0 |
| TC_036 | 손절/익절 알림 | 1. 목표가 도달 | 푸시 알림 발송 | P1 |
| TC_037 | 포지션 이력 | 1. 이력 탭 클릭 | 과거 거래 내역 | P1 |

### 4.10 포트폴리오 성과 화면 (InvestmentPerformanceScreen)

#### 테스트 케이스
| TC_ID | 시나리오 | 테스트 단계 | 예상 결과 | 우선순위 |
|-------|---------|------------|-----------|---------|
| TC_038 | 전체 수익률 | 1. 성과 화면 진입 | 누적 수익률 그래프 | P0 |
| TC_039 | 전략별 성과 | 1. 전략별 탭 클릭 | 각 전략 수익률 비교 | P0 |
| TC_040 | 기간별 필터 | 1. 1M/3M/1Y 선택 | 해당 기간 데이터 | P1 |
| TC_041 | 상세 통계 | 1. 통계 더보기 클릭 | 샤프지수, MDD 등 | P2 |

### 4.11 프로필 화면 (ProfileScreen)

#### 테스트 케이스
| TC_ID | 시나리오 | 테스트 단계 | 예상 결과 | 우선순위 |
|-------|---------|------------|-----------|---------|
| TC_042 | 프로필 정보 확인 | 1. 프로필 탭 진입 | 사용자 정보 표시 | P0 |
| TC_043 | 구독 상태 확인 | 1. 구독 정보 섹션 | 현재 플랜, 만료일 | P0 |
| TC_044 | 언어 변경 | 1. 언어 설정 클릭<br>2. 언어 변경 | 앱 언어 즉시 변경 | P1 |
| TC_045 | 로그아웃 | 1. 로그아웃 클릭<br>2. 확인 | 로그인 화면 이동 | P0 |
| TC_046 | 계정 삭제 | 1. 계정 삭제 클릭<br>2. 재확인 | 계정 영구 삭제 | P1 |

## 5. 주요 사용자 시나리오별 E2E 테스트

### 5.1 신규 사용자의 첫 사용 경험

```gherkin
Feature: 신규 사용자 온보딩
  Scenario: 첫 방문자가 앱을 설치하고 구독을 시작하는 과정
    Given 앱을 처음 설치한 사용자
    When 앱을 실행하면
    Then 스플래시 화면이 3초간 표시된다
    
    When 스플래시 화면이 종료되면
    Then 언어 선택 화면이 표시된다
    
    When 한국어를 선택하고 다음을 클릭하면
    Then 온보딩 화면이 한국어로 표시된다
    
    When 온보딩 4단계를 모두 확인하고 시작하기를 클릭하면
    Then 약관 동의 화면이 표시된다
    
    When 모든 약관에 동의하면
    Then 로그인 화면이 표시된다
    
    When 회원가입을 선택하고 정보를 입력하면
    Then 전략가 선택 화면이 표시된다
    
    When 제시 리버모어 전략을 선택하면
    Then 구독 플랜 선택 화면이 표시된다
    
    When Basic 플랜을 선택하고 결제를 완료하면
    Then 메인 화면으로 이동하고 추천 종목이 표시된다
```

### 5.2 매매 신호 확인 및 실행

```gherkin
Feature: 매매 신호 확인 및 포지션 관리
  Scenario: 사용자가 추천을 확인하고 매수를 결정하는 과정
    Given 로그인된 Premium 구독 사용자
    When 메인 화면에서 새로운 매수 추천을 확인하면
    Then 종목명, 현재가, 추천 전략이 표시된다
    
    When 추천 카드를 클릭하면
    Then 상세 분석 화면이 표시된다
    And 진입가, 손절가, 목표가가 명확히 표시된다
    
    When 포지션 계산기에 100만원을 입력하면
    Then 적정 매수 수량이 자동 계산된다
    
    When 알림 설정을 활성화하면
    Then 목표가/손절가 도달시 알림이 설정된다
    
    When 매수 버튼을 클릭하면
    Then 연동된 증권사 앱으로 이동한다
    
    When 매수 완료 후 앱으로 돌아오면
    Then 포지션 화면에 새로운 보유 종목이 추가된다
```

### 5.3 리스크 관리 시나리오

```gherkin
Feature: 리스크 관리 및 손절
  Scenario: 손절가 도달시 알림 및 대응
    Given 보유 중인 포지션이 있는 사용자
    When 주가가 손절가에 도달하면
    Then 즉시 푸시 알림이 발송된다
    
    When 알림을 클릭하면
    Then 해당 포지션 상세 화면이 표시된다
    And 손실률과 권장 조치가 표시된다
    
    When 손절 실행을 선택하면
    Then 매도 주문 화면으로 이동한다
    
    When 매도 완료 후 포지션 화면으로 돌아오면
    Then 해당 포지션이 종료 처리된다
    And 거래 이력에 손실 기록이 저장된다
```

### 5.4 포트폴리오 분석 시나리오

```gherkin
Feature: 포트폴리오 성과 분석
  Scenario: 월간 투자 성과 확인
    Given 1개월 이상 거래 이력이 있는 사용자
    When 포트폴리오 성과 화면에 진입하면
    Then 전체 수익률 그래프가 표시된다
    
    When 전략별 성과 탭을 선택하면
    Then 각 전략의 수익률이 비교 차트로 표시된다
    
    When 상세 통계를 확인하면
    Then 승률, 평균 수익, MDD 등이 표시된다
    
    When 특정 거래를 클릭하면
    Then 해당 거래의 상세 내역이 표시된다
```

## 6. 엣지 케이스 및 오류 처리

### 6.1 네트워크 오류
| 시나리오 | 예상 동작 | 테스트 방법 |
|---------|-----------|------------|
| 오프라인 상태에서 앱 실행 | 캐시된 데이터 표시, 오프라인 안내 | 비행기 모드 활성화 |
| 추천 로딩 중 연결 끊김 | 재시도 버튼 표시 | 네트워크 차단 |
| 결제 중 연결 끊김 | 거래 보류, 복구 후 재개 | 결제 중 네트워크 차단 |

### 6.2 데이터 오류
| 시나리오 | 예상 동작 | 테스트 방법 |
|---------|-----------|------------|
| 잘못된 가격 데이터 | 데이터 검증, 오류 표시 | 모의 잘못된 데이터 |
| 추천 데이터 없음 | "오늘의 추천 없음" 표시 | 빈 응답 테스트 |
| 동기화 오류 | 재동기화 시도, 안내 메시지 | 서버 시간 불일치 |

### 6.3 권한 및 인증
| 시나리오 | 예상 동작 | 테스트 방법 |
|---------|-----------|------------|
| 토큰 만료 | 자동 갱신 또는 재로그인 | 토큰 강제 만료 |
| 구독 만료 | 구독 갱신 안내, 기능 제한 | 구독 상태 변경 |
| 다중 기기 로그인 | 기존 세션 종료 알림 | 다른 기기에서 로그인 |

## 7. 성능 테스트 시나리오

### 7.1 앱 시작 성능
- **목표**: 콜드 스타트 3초 이내
- **측정**: 앱 아이콘 탭 → 메인 화면 표시

### 7.2 화면 전환 성능
- **목표**: 화면 전환 0.5초 이내
- **측정**: 탭 전환, 상세 화면 이동

### 7.3 데이터 로딩 성능
- **목표**: 추천 목록 로딩 2초 이내
- **측정**: Pull to refresh → 데이터 표시

### 7.4 메모리 사용량
- **목표**: 평균 200MB 이하
- **측정**: 30분 연속 사용 시 메모리 사용량

## 8. 접근성 테스트

### 8.1 시각 접근성
- 모든 텍스트 최소 14pt 이상
- 명암비 WCAG AA 기준 충족
- 다크모드/라이트모드 지원
- 색맹 사용자를 위한 색상 외 구분 요소

### 8.2 조작 접근성
- 모든 터치 영역 44x44pt 이상
- 스와이프 대체 버튼 제공
- 한 손 조작 가능한 UI 배치

## 9. 보안 테스트

### 9.1 인증 보안
- 비밀번호 복잡도 검증
- 브루트포스 공격 방지
- 세션 타임아웃 (30분)

### 9.2 데이터 보안
- 민감 정보 암호화 저장
- 안전한 통신 (HTTPS)
- 스크린샷 방지 (금융 정보)

## 10. 자동화 테스트 구현 예시

### 10.1 Flutter Integration Test
```dart
// test/integration/onboarding_test.dart
import 'package:flutter_test/flutter_test.dart';
import 'package:integration_test/integration_test.dart';

void main() {
  IntegrationTestWidgetsFlutterBinding.ensureInitialized();

  group('신규 사용자 온보딩', () {
    testWidgets('언어 선택부터 구독까지 완료', (tester) async {
      // 앱 시작
      await tester.pumpWidget(MyApp());
      await tester.pumpAndSettle();

      // 스플래시 화면 대기
      await tester.pump(Duration(seconds: 3));

      // 언어 선택
      expect(find.text('언어를 선택하세요'), findsOneWidget);
      await tester.tap(find.text('한국어'));
      await tester.tap(find.text('다음'));
      await tester.pumpAndSettle();

      // 온보딩 진행
      for (int i = 0; i < 4; i++) {
        await tester.drag(find.byType(PageView), Offset(-400, 0));
        await tester.pumpAndSettle();
      }
      
      await tester.tap(find.text('시작하기'));
      await tester.pumpAndSettle();

      // 약관 동의
      await tester.tap(find.byKey(Key('agree_all')));
      await tester.tap(find.text('다음'));
      await tester.pumpAndSettle();

      // 로그인 화면 확인
      expect(find.text('로그인'), findsOneWidget);
    });
  });
}
```

### 10.2 Widget Test
```dart
// test/widgets/recommendation_card_test.dart
import 'package:flutter_test/flutter_test.dart';

void main() {
  group('추천 카드 위젯', () {
    testWidgets('추천 정보가 올바르게 표시됨', (tester) async {
      final recommendation = StockRecommendation(
        symbol: 'AAPL',
        currentPrice: 150.0,
        targetPrice: 180.0,
        stopLoss: 140.0,
        strategy: '제시 리버모어',
      );

      await tester.pumpWidget(
        MaterialApp(
          home: RecommendationCard(recommendation: recommendation),
        ),
      );

      expect(find.text('AAPL'), findsOneWidget);
      expect(find.text('₩150.0'), findsOneWidget);
      expect(find.text('목표: ₩180.0'), findsOneWidget);
      expect(find.text('손절: ₩140.0'), findsOneWidget);
      expect(find.text('제시 리버모어'), findsOneWidget);
    });
  });
}
```

## 11. 회귀 테스트 체크리스트

### 매 릴리즈 전 필수 확인 사항
- [ ] 신규 사용자 온보딩 전체 플로우
- [ ] 로그인/로그아웃 정상 작동
- [ ] 추천 종목 로딩 및 표시
- [ ] 구독 결제 프로세스
- [ ] 푸시 알림 수신
- [ ] 포지션 관리 CRUD
- [ ] 다국어 지원 정상 작동
- [ ] 오프라인 모드 처리
- [ ] 데이터 동기화
- [ ] 성능 기준 충족

## 12. 테스트 우선순위 및 일정

### Phase 1 (MVP) - 2주
- P0 테스트 케이스 100% 커버리지
- 핵심 사용자 시나리오 E2E 테스트
- 기본 성능 및 보안 테스트

### Phase 2 - 4주
- P1 테스트 케이스 추가
- 엣지 케이스 및 오류 처리
- 자동화 테스트 구축

### Phase 3 - 6주
- P2 테스트 케이스 완성
- 접근성 및 국제화 테스트
- 부하 테스트 및 최적화

## 13. 성공 지표

- **기능 테스트 커버리지**: 90% 이상
- **자동화 테스트 비율**: 70% 이상
- **P0 버그**: 0개
- **P1 버그**: 5개 이하
- **앱 크래시율**: 0.1% 이하
- **사용자 만족도**: 4.5/5 이상

이 테스트 계획은 Product Manager의 비즈니스 요구사항, UX/UI Designer의 사용성 관점, Frontend Developer의 기술적 구현, QA Engineer의 품질 보증 관점을 모두 통합하여 작성되었습니다.